{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yanyuming/Documents/GitHub/spotify-clone/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/yanyuming/Documents/GitHub/spotify-clone/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/yanyuming/Documents/GitHub/spotify-clone/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{getAllAlbums,getSongsInAlbum,getPresignedUrl}from'../services/musicService';import AlbumGallery from'./AlbumGallery';import PlaybackBar from'./PlaybackBar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),albums=_useState2[0],setAlbums=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),currentSong=_useState4[0],setCurrentSong=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPlaying=_useState6[0],setIsPlaying=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),presignedUrl=_useState8[0],setPresignedUrl=_useState8[1];useEffect(function(){var fetchAlbums=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var fetchedAlbums;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getAllAlbums();case 2:fetchedAlbums=_context.sent;setAlbums(fetchedAlbums);case 4:case\"end\":return _context.stop();}},_callee);}));return function fetchAlbums(){return _ref.apply(this,arguments);};}();fetchAlbums();},[]);useEffect(function(){var fetchPresignedUrl=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var url;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return getPresignedUrl(\"AlbumSample\",\"SongSample\");case 3:url=_context2.sent;setPresignedUrl(url);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(\"Error fetching presigned URL on /home: \",_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function fetchPresignedUrl(){return _ref2.apply(this,arguments);};}();fetchPresignedUrl();},[]);var handleAlbumClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(albumId){var songs;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getSongsInAlbum(albumId);case 2:songs=_context3.sent;if(songs.length>0){setCurrentSong(songs[0]);setIsPlaying(true);}case 4:case\"end\":return _context3.stop();}},_callee3);}));return function handleAlbumClick(_x){return _ref3.apply(this,arguments);};}();var handleSongChange=function handleSongChange(song){setCurrentSong(song);setIsPlaying(true);};var togglePlayPause=function togglePlayPause(){setIsPlaying(!isPlaying);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AlbumGallery,{albums:albums,onAlbumClick:handleAlbumClick}),/*#__PURE__*/_jsx(PlaybackBar,{currentSong:currentSong,isPlaying:isPlaying,onPlayPause:togglePlayPause})]});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","getAllAlbums","getSongsInAlbum","getPresignedUrl","AlbumGallery","PlaybackBar","jsx","_jsx","jsxs","_jsxs","Home","_useState","_useState2","_slicedToArray","albums","setAlbums","_useState3","_useState4","currentSong","setCurrentSong","_useState5","_useState6","isPlaying","setIsPlaying","_useState7","_useState8","presignedUrl","setPresignedUrl","fetchAlbums","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","fetchedAlbums","wrap","_callee$","_context","prev","next","sent","stop","apply","arguments","fetchPresignedUrl","_ref2","_callee2","url","_callee2$","_context2","t0","console","error","handleAlbumClick","_ref3","_callee3","albumId","songs","_callee3$","_context3","length","_x","handleSongChange","song","togglePlayPause","children","onAlbumClick","onPlayPause"],"sources":["/Users/yanyuming/Documents/GitHub/spotify-clone/client/src/components/Home.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Album, Song } from '../interfaces/MusicModels';\nimport { getAllAlbums, getSongsInAlbum, getPresignedUrl } from '../services/musicService';\nimport AlbumGallery from './AlbumGallery';\nimport PlaybackBar from './PlaybackBar';\n\nconst Home: React.FC = () => {\n  const [albums, setAlbums] = useState<Album[]>([]);\n  const [currentSong, setCurrentSong] = useState<Song | null>(null);\n  const [isPlaying, setIsPlaying] = useState<boolean>(false);\n  const [presignedUrl, setPresignedUrl] = useState<string>(\"\");\n\n  useEffect(() => {\n    const fetchAlbums = async () => {\n      const fetchedAlbums = await getAllAlbums();\n      setAlbums(fetchedAlbums);\n    };\n\n    fetchAlbums();\n  }, []);\n\n  useEffect(() => {\n    const fetchPresignedUrl = async () => {\n        try {\n            const url = await getPresignedUrl(\"AlbumSample\", \"SongSample\");\n            setPresignedUrl(url);\n        } catch (error) {\n            console.error(\"Error fetching presigned URL on /home: \", error);\n        }\n    };\n\n    fetchPresignedUrl();\n  }, []);\n\n  const handleAlbumClick = async (albumId: string) => {\n    const songs = await getSongsInAlbum(albumId);\n    if (songs.length > 0) { \n      setCurrentSong(songs[0]);\n      setIsPlaying(true);\n    }\n  };\n\n  const handleSongChange = (song: Song) => {\n    setCurrentSong(song);\n    setIsPlaying(true);\n  };\n\n  const togglePlayPause = () => {\n    setIsPlaying(!isPlaying);\n  };\n\n  return (\n    <div>\n      <AlbumGallery albums={albums} onAlbumClick={handleAlbumClick} />\n      <PlaybackBar \n        currentSong={currentSong} \n        isPlaying={isPlaying} \n        onPlayPause={togglePlayPause} \n      />\n    </div>\n  );\n}\n\nexport default Home;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}